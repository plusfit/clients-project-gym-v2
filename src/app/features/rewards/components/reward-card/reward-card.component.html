<ion-card class="reward-card" [class.disabled]="!reward.enabled" [class.insufficient-points]="userPoints < reward.pointsRequired">
  <ion-card-header class="card-header">
    <!-- Reward Image -->
    <div class="image-container" *ngIf="hasImage">
      <ion-img 
        [src]="reward.imageUrl" 
        [alt]="reward.name"
        (ionError)="onImageError($event)"
        class="reward-image">
      </ion-img>
    </div>
    
    <!-- Default Icon if no image -->
    <div class="icon-container" *ngIf="!hasImage">
      <ion-icon name="gift-outline" class="reward-icon"></ion-icon>
    </div>

    <!-- Status Badge -->
    <div class="status-badge" *ngIf="!reward.enabled">
      <ion-icon name="close-circle-outline"></ion-icon>
      <span>No disponible</span>
    </div>
  </ion-card-header>

  <ion-card-content class="card-content">
    <!-- Reward Title -->
    <ion-card-title class="reward-title">{{ reward.name }}</ion-card-title>
    
    <!-- Reward Description -->
    <ion-text class="reward-description" *ngIf="reward.description">
      <p>{{ reward.description }}</p>
    </ion-text>

    <!-- Points Required -->
    <div class="points-section">
      <div class="points-required">
        <ion-icon name="star-outline" class="points-icon"></ion-icon>
        <span class="points-text">{{ reward.pointsRequired }} puntos</span>
      </div>
      
      <!-- User Points Status -->
      <div class="points-status" [class.sufficient]="canExchange" [class.insufficient]="!canExchange">
        <span class="status-text" *ngIf="canExchange">
          <ion-icon name="checkmark-circle-outline"></ion-icon>
          Tienes suficientes puntos
        </span>
        <span class="status-text" *ngIf="!canExchange && reward.enabled">
          Necesitas {{ reward.pointsRequired - userPoints }} puntos m√°s
        </span>
      </div>
    </div>

    <!-- Exchange Stats -->
    <div class="exchange-stats" *ngIf="reward.totalExchanges > 0">
      <ion-text color="medium">
        <small>Canjeado {{ reward.totalExchanges }} veces</small>
      </ion-text>
    </div>

    <!-- Exchange Button -->
    <div class="button-container">
      <ion-button 
        expand="block"
        [disabled]="!canExchange || isExchanging"
        [color]="canExchange ? 'primary' : 'medium'"
        (click)="onExchange()"
        class="exchange-button">
        
        <span *ngIf="!isExchanging && canExchange">Canjear</span>
        <span *ngIf="!isExchanging && !canExchange && reward.enabled">Puntos insuficientes</span>
        <span *ngIf="!isExchanging && !reward.enabled">No disponible</span>
        <span *ngIf="isExchanging">Canjeando...</span>
      </ion-button>
    </div>
  </ion-card-content>
</ion-card>
